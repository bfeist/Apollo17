<html>
<head>
    <script type="text/javascript" src="lib/jquery-2.1.4.min.js"></script>
    <!-- Load the Paper.js library -->
    <script type="text/javascript" src="lib/paper-full.js"></script>
    <!-- Define inlined PaperScript associate it with myCanvas -->
    <script type="text/javascript" src="navigator.js"></script>
    <script type="text/javascript">
        //everything in here simulates the nav sitting in the real app.
        var gApplicationReady = 0;
        var gTOCAll = [];

        var gCurrMissionTime = "000:10:00";

        $.when(ajaxGetTOCAll()).done(function(){
            // the code here will be executed when all ajax requests resolve and the video.js player has been initialized.
            initNavigator();
            incrementFakeMissionTime();
        });

        function ajaxGetTOCAll() {
            // NOTE:  This function must return the value
            //        from calling the $.ajax() method.
            return $.ajax({
                type: "GET",
                url: "./indexes/TOCall.csv?stopcache=" + Math.random(),
                dataType: "text",
                success: function(data) {
                    processTOCAllData(data);
                }
            });
        }

        function processTOCAllData(allText) {
            console.log("processTOCIndexData");
            var allTextLines = allText.split(/\r\n|\n/);
            for (var i = 0; i < allTextLines.length; i++) {
                var data = allTextLines[i].split('|');
                if (data[0] != "") {
                    var rec = [];
                    rec.push(data[0]);
                    rec.push(data[1]);
                    rec.push(data[2]);
                    gTOCAll.push(rec);
                }
            }
        }
        function incrementFakeMissionTime() {
            return window.setInterval(function () {
                var tempSeconds = timeStrToSeconds(gCurrMissionTime);
                tempSeconds ++;
                gCurrMissionTime = secondsToTimeStr(tempSeconds);
                //redrawAll();
            }, 1000);
        }

    </script>
    <style type="text/css">
        html,
        body {
            margin: 0;
            height: 100%;
        }

        /* Scale canvas with resize attribute to full size */
        canvas[resize] {
            width: 100%;
            height: 110px;
        }
    </style>
</head>
<body bgcolor="black">
<div style=" display: -webkit-flex; display: flex;">
    <div style="width: 280px; color: grey;">
        spacer
    </div>
    <div style="flex:1;">
        <canvas id="myCanvas" resize></canvas>
    </div>
</div>
<div style="width: 100%; height:100%; background-color: #363636;">
    x
</div>
</body>
</html>